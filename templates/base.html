{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">

<head>
    <meta charset="UTF-8">
    <!-- iOS Safari оптимізований viewport -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Відключення кешування для розробки -->
    {% if debug %}
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    {% endif %}

    <!-- SEO Meta Tags -->
    <title>{% block title %}{% trans "PrometeyLabs - Розробка сайтів під ключ | Telegram боти | Реклама" %}{% endblock %}</title>
    <meta name="description"
        content="{% block description %}PrometeyLabs - розробка сайтів під ключ, Telegram боти, налаштування реклами Google Ads, ведення соцмереж, навчання веб-розробки. Конкурентні ціни, сучасні технології.{% endblock %}">
    <meta name="keywords"
        content="{% block keywords %}розробка сайтів, сайт під ключ, telegram бот, реклама google ads, веб розробка, навчання програмування{% endblock %}">

    <!-- Open Graph -->
    <meta property="og:title" content="{% block og_title %}PrometeyLabs - Розробка сайтів під ключ{% endblock %}">
    <meta property="og:description"
        content="{% block og_description %}Створюємо сайти під ключ, Telegram боти, налаштовуємо рекламу. Сучасні технології, конкурентні ціни.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <!-- Load static files ONCE at the top -->
    {% load static %}

    <meta property="og:image" content="{% block og_image %}{% static 'images/og-image.jpg' %}{% endblock %}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="apple-touch-icon" href="{% static 'images/apple-touch-icon.png' %}">

    <!-- CSS Core (завантажуються першими) -->
    <link rel="stylesheet" href="{% static 'css/core/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/core/variables.css' %}">
    <link rel="stylesheet" href="{% static 'css/core/typography.css' %}">
    <link rel="stylesheet" href="{% static 'css/core/layout.css' %}">
    <link rel="stylesheet" href="{% static 'css/core/animations.css' %}">
    
    <!-- CSS Components -->
    <link rel="stylesheet" href="{% static 'css/components/navigation.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/buttons.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/modals.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/footer.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/hero-parallax.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/mobile-optimizations.css' %}">
    
    <!-- Page specific CSS -->
    {% block page_css %}{% endblock %}
    {% block extra_css %}{% endblock %}

    <!-- CSRF Token для JavaScript -->
    {% csrf_token %}
    <script>
        window.csrfToken = '{{ csrf_token }}';
    </script>

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "PrometeyLabs",
        "description": "Розробка сайтів під ключ, Telegram боти, реклама",
        "url": "{{ request.build_absolute_uri }}",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+380-XX-XXX-XX-XX",
            "contactType": "Customer Service"
        },
        "sameAs": [
            "https://t.me/prometeylabs",
            "https://instagram.com/prometeylabs"
        ]
    }
    </script>

    {% block extra_head %}{% endblock %}
</head>

<body>
    <!-- Header & Navigation -->
    {% include 'components/header.html' %}

    <!-- Mobile Menu -->
    {% include 'components/burger_menu.html' %}

    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    {% include 'components/footer.html' %}

    <!-- Call Button -->
    <button class="call-button mobile-touch-target" data-modal="call-request-modal"
        aria-label="{% trans 'Замовити дзвінок' %}">
        {% trans "Замовити дзвінок" %}
    </button>

    <!-- Modals -->
    {% include 'components/modals.html' %}

    <!-- Modern JavaScript Systems (2025) -->
    <script src="{% static 'js/mobile-core.js' %}" defer></script>
    <script src="{% static 'js/video-system.js' %}" defer></script>
    <script src="{% static 'js/base.js' %}" defer></script>
    {% block extra_js %}{% endblock %}

    <!-- CSRF Token for AJAX -->
    {% csrf_token %}

    <!-- Analytics (буде додано пізніше) -->
    {% block analytics %}{% endblock %}
</body>

</html>