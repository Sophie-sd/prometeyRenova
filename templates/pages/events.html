{% extends 'base.html' %}
{% load static %}

{% block title %}–ü–æ–¥—ñ—ó - PrometeyLabs | –í–µ–±—ñ–Ω–∞—Ä–∏, –∫—É—Ä—Å–∏ —Ç–∞ –∑—É—Å—Ç—Ä—ñ—á—ñ{% endblock %}

{% block description %}–ê–∫—Ç—É–∞–ª—å–Ω—ñ –ø–æ–¥—ñ—ó PrometeyLabs: –≤–µ–±—ñ–Ω–∞—Ä–∏ –∑ –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫–∏, –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –∫—É—Ä—Å–∏, –∑–Ω–∏–∂–∫–∏ –Ω–∞ –ø–æ—Å–ª—É–≥–∏ —Ç–∞ –∑—É—Å—Ç—Ä—ñ—á—ñ –∑ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º–∏.{% endblock %}

{% block keywords %}–ø–æ–¥—ñ—ó PrometeyLabs, –≤–µ–±—ñ–Ω–∞—Ä–∏ –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫–∞, –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –∫—É—Ä—Å–∏, –∑–Ω–∏–∂–∫–∏, –∑—É—Å—Ç—Ä—ñ—á—ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{% static 'css/events.css' %}">
{% endblock %}

{% block content %}
<!-- Events Hero Section -->
<section class="events-hero page-section" id="events-hero">
    <div class="container">
        <div class="hero-content section-content text-center">
            <h1 class="hero-title text-primary">
                EVENTS
            </h1>
            <p class="hero-subtitle">
                –û—Å–≤—ñ—Ç–Ω—ñ –ø–æ–¥—ñ—ó, –≤–µ–±—ñ–Ω–∞—Ä–∏ —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
            </p>
            <div class="hero-description">
                <p>
                    –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—à–æ—ó —Å–ø—ñ–ª—å–Ω–æ—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤! –ú–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–º–æ 
                    –≤–µ–±—ñ–Ω–∞—Ä–∏, –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å–∏ —Ç–∞ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∑–Ω–∏–∂–∫–∏ –Ω–∞ –Ω–∞—à—ñ –ø–æ—Å–ª—É–≥–∏.
                </p>
            </div>
            
            <div class="events-stats">
                <div class="stat-item">
                    <div class="stat-number text-primary">{{ total_events }}</div>
                    <div class="stat-label">–í—Å—å–æ–≥–æ –ø–æ–¥—ñ–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number text-primary">{{ upcoming_events }}</div>
                    <div class="stat-label">–ú–∞–π–±—É—Ç–Ω—ñ—Ö –ø–æ–¥—ñ–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number text-primary">{{ participants_count|default:"500+" }}</div>
                    <div class="stat-label">–£—á–∞—Å–Ω–∏–∫—ñ–≤</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Event Types Section -->
<section class="event-types-section page-section" id="event-types">
    <div class="container">
        <div class="section-content">
            <h2 class="section-title text-center mb-5">
                –¢–∏–ø–∏ <span class="text-primary">–ø–æ–¥—ñ–π</span>
            </h2>
            
            <div class="event-types-grid">
                <div class="event-type-card">
                    <div class="event-type-icon">üé•</div>
                    <h3 class="event-type-title">–í–µ–±—ñ–Ω–∞—Ä–∏</h3>
                    <p class="event-type-description">
                        –û–Ω–ª–∞–π–Ω –ª–µ–∫—Ü—ñ—ó –∑ –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö —Ç–µ–º –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫–∏, 
                        Django, JavaScript —Ç–∞ —Å—É—á–∞—Å–Ω–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π.
                    </p>
                    <div class="event-type-features">
                        <div class="feature">‚úì –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</div>
                        <div class="feature">‚úì –ó–∞–ø–∏—Å –¥–æ—Å—Ç—É–ø–Ω–∏–π</div>
                        <div class="feature">‚úì Q&A —Å–µ—Å—ñ—ó</div>
                    </div>
                </div>
                
                <div class="event-type-card">
                    <div class="event-type-icon">üí∞</div>
                    <h3 class="event-type-title">–ó–Ω–∏–∂–∫–∏</h3>
                    <p class="event-type-description">
                        –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –Ω–∞ —Ä–æ–∑—Ä–æ–±–∫—É —Å–∞–π—Ç—ñ–≤, 
                        Telegram –±–æ—Ç—ñ–≤ —Ç–∞ —ñ–Ω—à—ñ –Ω–∞—à—ñ –ø–æ—Å–ª—É–≥–∏.
                    </p>
                    <div class="event-type-features">
                        <div class="feature">‚úì –î–æ 50% –∑–Ω–∏–∂–∫–∏</div>
                        <div class="feature">‚úì –û–±–º–µ–∂–µ–Ω–∏–π —á–∞—Å</div>
                        <div class="feature">‚úì –ï–∫—Å–∫–ª—é–∑–∏–≤–Ω—ñ —É–º–æ–≤–∏</div>
                    </div>
                </div>
                
                <div class="event-type-card">
                    <div class="event-type-icon">üéì</div>
                    <h3 class="event-type-title">–ö—É—Ä—Å–∏</h3>
                    <p class="event-type-description">
                        –Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ –∫—É—Ä—Å–∏ –∑ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, 
                        –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ digital-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É.
                    </p>
                    <div class="event-type-features">
                        <div class="feature">‚úì –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
                        <div class="feature">‚úì –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–µ–Ω—Ç–æ—Ä—ñ–≤</div>
                        <div class="feature">‚úì –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏</div>
                    </div>
                </div>
                
                <div class="event-type-card">
                    <div class="event-type-icon">ü§ù</div>
                    <h3 class="event-type-title">–ó—É—Å—Ç—Ä—ñ—á—ñ</h3>
                    <p class="event-type-description">
                        –ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ñ –∑—É—Å—Ç—Ä—ñ—á—ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, 
                        –Ω–µ—Ç–≤–æ—Ä–∫—ñ–Ω–≥ —Ç–∞ –æ–±–º—ñ–Ω –¥–æ—Å–≤—ñ–¥–æ–º.
                    </p>
                    <div class="event-type-features">
                        <div class="feature">‚úì –ù–µ—Ç–≤–æ—Ä–∫—ñ–Ω–≥</div>
                        <div class="feature">‚úì –û–±–º—ñ–Ω –¥–æ—Å–≤—ñ–¥–æ–º</div>
                        <div class="feature">‚úì –ö–∞–≤–∏ —Ç–∞ –∑–∞–∫—É—Å–∫–∏</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Current Events -->
<section class="current-events-section page-section" id="current-events">
    <div class="container">
        <div class="section-content">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">
                    –ê–∫—Ç—É–∞–ª—å–Ω—ñ <span class="text-primary">–ø–æ–¥—ñ—ó</span>
                </h2>
                <p class="section-description">
                    –ù–µ –ø—Ä–æ–ø—É—Å—Ç—ñ—Ç—å –Ω–∞–π–±–ª–∏–∂—á—ñ –∑–∞—Ö–æ–¥–∏ —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
                </p>
            </div>
            
            {% if events %}
            <div class="events-timeline">
                {% for event in events %}
                <article class="event-card {% if event.status == 'active' %}featured{% endif %}" data-event-type="{{ event.event_type }}">
                    <div class="event-date-badge">
                        <div class="event-day">{{ event.start_date|date:"d" }}</div>
                        <div class="event-month">{{ event.start_date|date:"M" }}</div>
                        {% if event.status == 'active' %}
                        <div class="event-status-indicator active"></div>
                        {% endif %}
                    </div>
                    
                    <div class="event-content">
                        <div class="event-meta">
                            <div class="event-category">
                                {% if event.event_type == 'webinar' %}üé• –í–µ–±—ñ–Ω–∞—Ä
                                {% elif event.event_type == 'discount' %}üí∞ –ó–Ω–∏–∂–∫–∞
                                {% elif event.event_type == 'course' %}üéì –ö—É—Ä—Å
                                {% elif event.event_type == 'workshop' %}üîß –ú–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å
                                {% elif event.event_type == 'meetup' %}ü§ù –ó—É—Å—Ç—Ä—ñ—á
                                {% else %}üìÖ –ü–æ–¥—ñ—è{% endif %}
                            </div>
                            
                            <div class="event-time">
                                {% if event.is_online %}
                                üåê –û–Ω–ª–∞–π–Ω
                                {% else %}
                                üìç {{ event.location|default:"–ö–∏—ó–≤" }}
                                {% endif %}
                            </div>
                        </div>
                        
                        <h3 class="event-title">{{ event.title }}</h3>
                        
                        <p class="event-excerpt">{{ event.excerpt }}</p>
                        
                        <div class="event-details">
                            <div class="event-datetime">
                                <strong>üìÖ –î–∞—Ç–∞:</strong> 
                                {{ event.start_date|date:"d.m.Y" }}
                                {% if event.start_date != event.end_date %}
                                - {{ event.end_date|date:"d.m.Y" }}
                                {% endif %}
                            </div>
                            
                            <div class="event-time-duration">
                                <strong>‚è∞ –ß–∞—Å:</strong> 
                                {{ event.start_date|date:"H:i" }}
                                {% if event.end_date %}
                                - {{ event.end_date|date:"H:i" }}
                                {% endif %}
                            </div>
                            
                            {% if event.price %}
                            <div class="event-price">
                                <strong>üí∞ –í–∞—Ä—Ç—ñ—Å—Ç—å:</strong> 
                                {% if event.price == 0 %}
                                –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ
                                {% else %}
                                {{ event.price }} –≥—Ä–Ω
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="event-actions">
                            {% if event.status == 'upcoming' or event.status == 'active' %}
                            {% if event.registration_deadline and event.registration_deadline > today %}
                            <a href="#" class="btn btn-primary register-btn" data-event-id="{{ event.id }}">
                                {% if event.event_type == 'webinar' %}–†–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ –≤–µ–±—ñ–Ω–∞—Ä
                                {% elif event.event_type == 'discount' %}–û—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∏–∂–∫—É
                                {% elif event.event_type == 'course' %}–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫—É—Ä—Å
                                {% else %}–í–∑—è—Ç–∏ —É—á–∞—Å—Ç—å{% endif %}
                            </a>
                            {% if event.meeting_link %}
                            <a href="{{ event.meeting_link }}" class="btn btn-secondary" target="_blank" rel="noopener">
                                –ü—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è
                            </a>
                            {% endif %}
                            {% else %}
                            <span class="registration-closed">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑–∞–∫—Ä–∏—Ç–∞</span>
                            {% endif %}
                            {% else %}
                            <span class="event-completed">–ü–æ–¥—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                            {% endif %}
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-events">
                <div class="no-events-icon">üìÖ</div>
                <h3 class="no-events-title">–ó–∞—Ä–∞–∑ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–æ–¥—ñ–π</h3>
                <p class="no-events-description">
                    –ü—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —â–æ–± –ø–µ—Ä—à–∏–º–∏ –¥—ñ–∑–Ω–∞–≤–∞—Ç–∏—Å—è –ø—Ä–æ –Ω–æ–≤—ñ –ø–æ–¥—ñ—ó
                </p>
                <a href="#newsletter" class="btn btn-primary">–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</a>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Newsletter Subscription -->
<section class="newsletter-section page-section" id="newsletter">
    <div class="container">
        <div class="section-content text-center">
            <h2 class="newsletter-title">
                –ü—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ <span class="text-primary">–ø–æ–¥—ñ—ó</span>
            </h2>
            <p class="newsletter-description">
                –ë—É–¥—å—Ç–µ –ø–µ—Ä—à–∏–º–∏, —Ö—Ç–æ –¥—ñ–∑–Ω–∞—î—Ç—å—Å—è –ø—Ä–æ –Ω–æ–≤—ñ –≤–µ–±—ñ–Ω–∞—Ä–∏, –∫—É—Ä—Å–∏ —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
            </p>
            
            <form class="newsletter-form" data-ajax="true" action="/forms/submit/" method="POST">
                {% csrf_token %}
                <input type="hidden" name="form_type" value="events_newsletter">
                
                <div class="newsletter-input-group">
                    <input 
                        type="email" 
                        name="email" 
                        placeholder="–í–∞—à email –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å" 
                        required
                        class="newsletter-input"
                    >
                    <button type="submit" class="newsletter-button btn btn-primary">
                        –ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è
                    </button>
                </div>
                
                <div class="newsletter-preferences">
                    <label class="preference-item">
                        <input type="checkbox" name="preferences" value="webinars" checked>
                        <span class="checkmark"></span>
                        –í–µ–±—ñ–Ω–∞—Ä–∏ —Ç–∞ –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å–∏
                    </label>
                    
                    <label class="preference-item">
                        <input type="checkbox" name="preferences" value="discounts" checked>
                        <span class="checkmark"></span>
                        –ó–Ω–∏–∂–∫–∏ —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
                    </label>
                    
                    <label class="preference-item">
                        <input type="checkbox" name="preferences" value="courses" checked>
                        <span class="checkmark"></span>
                        –ù–æ–≤—ñ –∫—É—Ä—Å–∏ —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∏
                    </label>
                </div>
                
                <p class="newsletter-privacy">
                    –ù–∞—Ç–∏—Å–∫–∞—é—á–∏ "–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è", –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
                </p>
            </form>
        </div>
    </div>
</section>

<!-- Past Events Archive -->
{% if past_events %}
<section class="past-events-section page-section" id="past-events">
    <div class="container">
        <div class="section-content">
            <h2 class="section-title text-center mb-5">
                –ê—Ä—Ö—ñ–≤ <span class="text-primary">–ø–æ–¥—ñ–π</span>
            </h2>
            
            <div class="past-events-grid">
                {% for event in past_events|slice:":6" %}
                <div class="past-event-card">
                    <div class="past-event-date">{{ event.start_date|date:"d.m.Y" }}</div>
                    <h4 class="past-event-title">{{ event.title }}</h4>
                    <p class="past-event-description">{{ event.excerpt|truncatewords:15 }}</p>
                    {% if event.meeting_link %}
                    <a href="{{ event.meeting_link }}" class="past-event-link" target="_blank" rel="noopener">
                        –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–ø–∏—Å
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            
            {% if past_events.count > 6 %}
            <div class="text-center mt-4">
                <button class="btn btn-secondary load-more-events">
                    –ü–æ–∫–∞–∑–∞—Ç–∏ –±—ñ–ª—å—à–µ –ø–æ–¥—ñ–π
                </button>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- Call to Action -->
<section class="events-cta-section page-section" id="events-cta">
    <div class="container">
        <div class="section-content text-center">
            <h2 class="cta-title">
                –•–æ—á–µ—Ç–µ –ø—Ä–æ–≤–µ—Å—Ç–∏ <span class="text-primary">–≤–ª–∞—Å–Ω—É –ø–æ–¥—ñ—é</span>?
            </h2>
            <p class="cta-description">
                –ú–∏ –¥–æ–ø–æ–º–æ–∂–µ–º–æ –æ—Ä–≥–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤–∞—à –≤–µ–±—ñ–Ω–∞—Ä, –∫—É—Ä—Å –∞–±–æ –∑—É—Å—Ç—Ä—ñ—á
            </p>
            
            <div class="cta-actions">
                <a href="/contacts/" class="btn btn-primary btn-large">
                    –û–±–≥–æ–≤–æ—Ä–∏—Ç–∏ —ñ–¥–µ—é
                </a>
                <a href="/developer/" class="btn btn-secondary btn-large">
                    –î—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Event Registration Modal -->
<div class="modal" id="event-registration-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ –ø–æ–¥—ñ—é</h3>
            <button class="modal-close" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">&times;</button>
        </div>
        
        <div class="modal-body">
            <form class="event-registration-form" data-ajax="true" action="/forms/submit/" method="POST">
                {% csrf_token %}
                <input type="hidden" name="form_type" value="event_registration">
                <input type="hidden" name="event_id" id="registration-event-id">
                
                <div class="form-group">
                    <label for="registration-name" class="form-label">–Ü–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ *</label>
                    <input type="text" id="registration-name" name="name" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="registration-email" class="form-label">Email *</label>
                    <input type="email" id="registration-email" name="email" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label for="registration-phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="registration-phone" name="phone" class="form-input">
                </div>
                
                <div class="form-group">
                    <label for="registration-experience" class="form-label">–†—ñ–≤–µ–Ω—å –¥–æ—Å–≤—ñ–¥—É</label>
                    <select id="registration-experience" name="experience" class="form-select">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Ä—ñ–≤–µ–Ω—å</option>
                        <option value="beginner">–ü–æ—á–∞—Ç–∫—ñ–≤–µ—Ü—å</option>
                        <option value="intermediate">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
                        <option value="advanced">–ü—Ä–æ—Å—É–Ω—É—Ç–∏–π</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="registration-questions" class="form-label">–ü–∏—Ç–∞–Ω–Ω—è –∞–±–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ</label>
                    <textarea id="registration-questions" name="questions" class="form-textarea" rows="3"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
                    <button type="button" class="btn btn-secondary modal-cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/events.js' %}"></script>
{% endblock %}